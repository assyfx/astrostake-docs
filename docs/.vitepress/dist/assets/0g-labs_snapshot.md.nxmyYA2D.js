import{_ as p,C as d,c as h,o as r,aj as i,G as e,w as l,j as s,a as t}from"./chunks/framework.wTHDseTJ.js";const _=JSON.parse('{"title":"Snapshot","description":"","frontmatter":{},"headers":[],"relativePath":"0g-labs/snapshot.md","filePath":"0g-labs/snapshot.md"}'),c={name:"0g-labs/snapshot.md"};function u(g,a,b,k,v,m){const n=d("PluginTabsTab"),o=d("PluginTabs");return r(),h("div",null,[a[6]||(a[6]=i('<h1 id="snapshot" tabindex="-1">Snapshot <a class="header-anchor" href="#snapshot" aria-label="Permalink to &quot;Snapshot&quot;">â€‹</a></h1><p>While we provide snapshots for those who need them, they are not the primary method and are <strong>used at your own risk.</strong> For better security and reliability, syncing from scratch is always the best choice. Use snapshots only if you fully understand the risks.</p><div class="highlight"><h3 id="snapshot-status" tabindex="-1">Snapshot Status <a class="header-anchor" href="#snapshot-status" aria-label="Permalink to &quot;Snapshot Status&quot;">â€‹</a></h3><p><strong>Status:</strong> ðŸŸ¢ Available</p><p>The snapshot is now available for download. Using the snapshot will significantly reduce sync time â€” depending on your system specifications, it may take around 1 to 2 hours to fully catch up to the latest block.</p><p>Without the snapshot, syncing from genesis can take 1 to 2 days or more.</p></div><h2 id="one-click-command" tabindex="-1">One-click command <a class="header-anchor" href="#one-click-command" aria-label="Permalink to &quot;One-click command&quot;">â€‹</a></h2>',4)),e(o,{sharedStateKey:"ab"},{default:l(()=>[e(n,{label:"Standard config"},{default:l(()=>a[0]||(a[0]=[s("p",null,[t("Snapshot full "),s("code",null,"db")],-1),s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"bash"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wget"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -qO-"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://astrostake.xyz/install_snapshot_and_config.sh)")])])])],-1),s("p",null,[t("Snapshot "),s("code",null,"flow_db"),t(" only.")],-1),s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"bash"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," <("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wget"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -qO-"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://astrostake.xyz/install_snapshot_flowdb_and_config.sh)")])])])],-1)])),_:1}),e(n,{label:"Turbo config"},{default:l(()=>a[1]||(a[1]=[s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"snapshot"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," turbo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," under"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," maintenance")])])])],-1)])),_:1})]),_:1}),a[7]||(a[7]=i('<h2 id="manual-install-snapshot" tabindex="-1">Manual Install Snapshot <a class="header-anchor" href="#manual-install-snapshot" aria-label="Permalink to &quot;Manual Install Snapshot&quot;">â€‹</a></h2><ol><li><strong>Install tools</strong></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd &amp;&amp; sudo apt-get install wget lz4 aria2 pv -y</span></span></code></pre></div><ol start="2"><li><strong>Download snapshot</strong></li></ol>',4)),e(o,{sharedStateKey:"ab"},{default:l(()=>[e(n,{label:"Standard config"},{default:l(()=>a[2]||(a[2]=[s("p",null,[s("strong",null,[t("Snapshot full "),s("code",null,"db")])],-1),s("p",null,[t("Blocks: "),s("code",null,"3632902"),t(" Size: "),s("code",null,"141 GB")],-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",null,"wget https://vault.astrostake.xyz/0g-labs/snapshot_standard_astrostake_2025-03-15.tar.lz4")])])])],-1),s("p",null,[s("strong",null,[t("Snapshot "),s("code",null,"flow_db"),t(" only. Without "),s("code",null,"data_db")])],-1),s("p",null,[t("Blocks: "),s("code",null,"4064648"),t(" Size: "),s("code",null,"373 MB")],-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",null,"wget https://vault.astrostake.xyz/0g-labs/snapshot_flowdb_standard_astrostake_2025-04-20.tar.lz4")])])])],-1)])),_:1}),e(n,{label:"Turbo config"},{default:l(()=>a[3]||(a[3]=[s("p",null,[s("strong",null,"Contract:"),t(),s("code",null,"turbo"),t(" Blocks: "),s("code",null,"-"),t(" Size: "),s("code",null,"-")],-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",null,"snapshot turbo under maintenance")])])])],-1)])),_:1})]),_:1}),a[8]||(a[8]=i('<ol start="3"><li><strong>Stop service</strong></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo systemctl stop zgs.service</span></span></code></pre></div><ol start="4"><li><strong>Extract</strong></li></ol>',3)),e(o,{sharedStateKey:"ab"},{default:l(()=>[e(n,{label:"Standard config"},{default:l(()=>a[4]||(a[4]=[s("p",null,[t("Snapshot full "),s("code",null,"db"),t(" extract")],-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",null,"rm -rf $HOME/0g-storage-node/run/db")]),t(`
`),s("span",{class:"line"},[s("span",null,"lz4 -c -d snapshot_standard_astrostake_2025-03-15.tar.lz4 | pv | tar -x -C $HOME/0g-storage-node/run")])])])],-1),s("p",null,[t("Snapshot "),s("code",null,"flow_db"),t(" only extract")],-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",null,"rm -rf $HOME/0g-storage-node/run/db/data_db")]),t(`
`),s("span",{class:"line"},[s("span",null,"rm -rf $HOME/0g-storage-node/run/db/flow_db")]),t(`
`),s("span",{class:"line"},[s("span",null,"lz4 -c -d snapshot_flowdb_standard_astrostake_2025-04-20.tar.lz4 | pv | tar -x -C $HOME/0g-storage-node/run/db")])])])],-1)])),_:1}),e(n,{label:"Turbo config"},{default:l(()=>a[5]||(a[5]=[s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",null,"snapshot turbo under maintenance")])])])],-1)])),_:1})]),_:1}),a[9]||(a[9]=i('<ol start="5"><li><strong>Restart node</strong></li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo systemctl restart zgs &amp;&amp; sudo systemctl status zgs</span></span></code></pre></div><ol start="6"><li><strong>Remove downloaded file (Optional)</strong></li></ol><p>After successfully installing, you can delete the downloaded file to free up storage space.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm -rf snapshot_standard_astrostake_2025-03-15.tar.lz4</span></span></code></pre></div><h2 id="useful-commands" tabindex="-1">Useful Commands <a class="header-anchor" href="#useful-commands" aria-label="Permalink to &quot;Useful Commands&quot;">â€‹</a></h2><p><strong>Check Full Logs</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tail -f ~/0g-storage-node/run/log/zgs.log.$(TZ=UTC date +%Y-%m-%d)</span></span></code></pre></div><p><strong>Check Blocks and Peers</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>source &lt;(curl -s https://astrostake.xyz/check_block.sh)</span></span></code></pre></div><p><strong>Change RPC</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>bash &lt;(wget -qO- https://astrostake.xyz/change_storage_rpc.sh)</span></span></code></pre></div><h2 id="remove-data-db" tabindex="-1">Remove data_db <a class="header-anchor" href="#remove-data-db" aria-label="Permalink to &quot;Remove data_db&quot;">â€‹</a></h2><div class="danger custom-block"><p class="custom-block-title">Reset Database State</p><p>If you haven&#39;t received the miner reward, try deleting the <code>data_db</code> folder and restart storage node.</p></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>systemctl stop zgs</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rm -rf $HOME/0g-storage-node/run/db/data_db</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>systemctl start zgs</span></span></code></pre></div>',17))])}const C=p(c,[["render",u]]);export{_ as __pageData,C as default};
