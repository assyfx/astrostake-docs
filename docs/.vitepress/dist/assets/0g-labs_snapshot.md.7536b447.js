import{_ as p,c as d,d as l,w as n,a as e,r as c,o as i,b as s,e as a}from"./app.002226a4.js";const U=JSON.parse('{"title":"Snapshot","description":"","frontmatter":{},"headers":[{"level":3,"title":"Snapshot Status","slug":"snapshot-status","link":"#snapshot-status","children":[]},{"level":2,"title":"One-click command","slug":"one-click-command","link":"#one-click-command","children":[]},{"level":2,"title":"Manual Install Snapshot","slug":"manual-install-snapshot","link":"#manual-install-snapshot","children":[]},{"level":2,"title":"Useful Commands","slug":"useful-commands","link":"#useful-commands","children":[]},{"level":2,"title":"Remove data_db","slug":"remove-data-db","link":"#remove-data-db","children":[]}],"relativePath":"0g-labs/snapshot.md"}'),r={name:"0g-labs/snapshot.md"},u=e('<h1 id="snapshot" tabindex="-1">Snapshot <a class="header-anchor" href="#snapshot" aria-hidden="true">#</a></h1><p>While we provide snapshots for those who need them, they are not the primary method and are <strong>used at your own risk.</strong> For better security and reliability, syncing from scratch is always the best choice. Use snapshots only if you fully understand the risks.</p><div class="highlight"><h3 id="snapshot-status" tabindex="-1">Snapshot Status <a class="header-anchor" href="#snapshot-status" aria-hidden="true">#</a></h3><p><strong>Status:</strong> \u{1F7E2} Available</p><p>The snapshot is now available for download. Using the snapshot will significantly reduce sync time \u2014 depending on your system specifications, it may take around 1 to 2 hours to fully catch up to the latest block.</p><p>Without the snapshot, syncing from genesis can take 1 to 2 days or more.</p></div><h2 id="one-click-command" tabindex="-1">One-click command <a class="header-anchor" href="#one-click-command" aria-hidden="true">#</a></h2>',4),h=s("p",null,[a("Snapshot full "),s("code",null,"db")],-1),_=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"bash "),s("span",{style:{color:"#89DDFF"}},"<("),s("span",{style:{color:"#C3E88D"}},"wget -qO- https://astrostake.xyz/install_snapshot_and_config.sh"),s("span",{style:{color:"#89DDFF"}},")")]),a(`
`),s("span",{class:"line"})])])],-1),g=s("p",null,[a("Snapshot "),s("code",null,"flow_db"),a(" only.")],-1),C=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"bash "),s("span",{style:{color:"#89DDFF"}},"<("),s("span",{style:{color:"#C3E88D"}},"wget -qO- https://astrostake.xyz/install_snapshot_flowdb_and_config.sh"),s("span",{style:{color:"#89DDFF"}},")")]),a(`
`),s("span",{class:"line"})])])],-1),y=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"snapshot turbo under maintenance")]),a(`
`),s("span",{class:"line"})])])],-1),b=e(`<h2 id="manual-install-snapshot" tabindex="-1">Manual Install Snapshot <a class="header-anchor" href="#manual-install-snapshot" aria-hidden="true">#</a></h2><ol><li><strong>Install tools</strong></li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">cd &amp;&amp; sudo apt-get install wget lz4 aria2 pv -y</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="2"><li><strong>Download snapshot</strong></li></ol>`,4),A=s("p",null,[s("strong",null,[a("Snapshot full "),s("code",null,"db")])],-1),m=s("p",null,[a("Blocks: "),s("code",null,"3632902"),a(" Size: "),s("code",null,"141 GB")],-1),f=s("div",{class:"language-"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"wget https://vault.astrostake.xyz/0g-labs/snapshot_standard_astrostake_2025-03-15.tar.lz4")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),v=s("p",null,[s("strong",null,[a("Snapshot "),s("code",null,"flow_db"),a(" only. Without "),s("code",null,"data_db")])],-1),k=s("p",null,[a("Blocks: "),s("code",null,"4064648"),a(" Size: "),s("code",null,"373 MB")],-1),D=s("div",{class:"language-"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"wget https://vault.astrostake.xyz/0g-labs/snapshot_flowdb_standard_astrostake_2025-04-20.tar.lz4")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),S=s("p",null,[s("strong",null,"Contract:"),a(),s("code",null,"turbo"),a(" Blocks: "),s("code",null,"-"),a(" Size: "),s("code",null,"-")],-1),T=s("div",{class:"language-"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"snapshot turbo under maintenance")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),w=e(`<ol start="3"><li><strong>Stop service</strong></li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl stop zgs.service</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="4"><li><strong>Extract</strong></li></ol>`,3),z=s("p",null,[a("Snapshot full "),s("code",null,"db"),a(" extract")],-1),x=s("div",{class:"language-"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rm -rf $HOME/0g-storage-node/run/db")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lz4 -c -d snapshot_standard_astrostake_2025-03-15.tar.lz4 | pv | tar -x -C $HOME/0g-storage-node/run")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),P=s("p",null,[a("Snapshot "),s("code",null,"flow_db"),a(" only extract")],-1),E=s("div",{class:"language-"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rm -rf $HOME/0g-storage-node/run/db/data_db")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rm -rf $HOME/0g-storage-node/run/db/flow_db")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"lz4 -c -d snapshot_flowdb_standard_astrostake_2025-04-20.tar.lz4 | pv | tar -x -C $HOME/0g-storage-node/run/db")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),O=s("div",{class:"language-"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"snapshot turbo under maintenance")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),I=e(`<ol start="5"><li><strong>Restart node</strong></li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">sudo systemctl restart zgs &amp;&amp; sudo systemctl status zgs</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="6"><li><strong>Remove downloaded file (Optional)</strong></li></ol><p>After successfully installing, you can delete the downloaded file to free up storage space.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">rm -rf snapshot_standard_astrostake_2025-03-15.tar.lz4</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="useful-commands" tabindex="-1">Useful Commands <a class="header-anchor" href="#useful-commands" aria-hidden="true">#</a></h2><p><strong>Check Full Logs</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">tail -f ~/0g-storage-node/run/log/zgs.log.$(TZ=UTC date +%Y-%m-%d)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>Check Blocks and Peers</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">source &lt;(curl -s https://astrostake.xyz/check_block.sh)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p><strong>Change RPC</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">bash &lt;(wget -qO- https://astrostake.xyz/change_storage_rpc.sh)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h2 id="remove-data-db" tabindex="-1">Remove data_db <a class="header-anchor" href="#remove-data-db" aria-hidden="true">#</a></h2><div class="danger custom-block"><p class="custom-block-title">Reset Database State</p><p>If you haven&#39;t received the miner reward, try deleting the <code>data_db</code> folder and restart storage node.</p></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">systemctl stop zgs</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">rm -rf $HOME/0g-storage-node/run/db/data_db</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki"><code><span class="line"><span style="color:#A6ACCD;">systemctl start zgs</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,17);function V($,F,R,B,M,N){const t=c("PluginTabsTab"),o=c("PluginTabs");return i(),d("div",null,[u,l(o,{sharedStateKey:"ab"},{default:n(()=>[l(t,{label:"Standard config"},{default:n(()=>[h,_,g,C]),_:1}),l(t,{label:"Turbo config"},{default:n(()=>[y]),_:1})]),_:1}),b,l(o,{sharedStateKey:"ab"},{default:n(()=>[l(t,{label:"Standard config"},{default:n(()=>[A,m,f,v,k,D]),_:1}),l(t,{label:"Turbo config"},{default:n(()=>[S,T]),_:1})]),_:1}),w,l(o,{sharedStateKey:"ab"},{default:n(()=>[l(t,{label:"Standard config"},{default:n(()=>[z,x,P,E]),_:1}),l(t,{label:"Turbo config"},{default:n(()=>[O]),_:1})]),_:1}),I])}const q=p(r,[["render",V]]);export{U as __pageData,q as default};
